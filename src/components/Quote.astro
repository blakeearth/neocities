---
import Tag from "./Tag.astro";
import FormattedDate from "./FormattedDate.astro";

interface Props {
  text: string;
  author: string;
  sourceTitle: string;
  sourceUrl: string;
  date?: string;
  dateLabel?: string;
  tags?: string[];
  coverImageUrl?: string;
  coverImageAlt?: string;
  coverImageLinkUrl?: string;
}

const {
  text,
  author,
  sourceTitle,
  sourceUrl,
  date,
  dateLabel = "Highlighted",
  tags = [],
  coverImageUrl,
  coverImageAlt,
  coverImageLinkUrl,
} = Astro.props;
---

<blockquote class="flex flex-col w-full border-l-1 py-4 pl-4">
  <div class="flex gap-4 justify-start h-full">
    <div class="w-full flex flex-col justify-start gap-2">
      <span class="text-xl lg:text-2xl">“{text}”</span>
      <div class="flex justify-start items-start">
        <div class="flex flex-col gap-2">
          <span class="text-sm">
            —{author}, <cite
              ><a href={sourceUrl}>{sourceTitle}</a></cite
            >{date && <>. {dateLabel} <FormattedDate date={new Date(date)} /></>}
          </span>
          {tags.length > 0 && (
            <div class="flex gap-2 flex-wrap">
              {tags.map((tag) => (
                <Tag emoji="#" href={`/library/highlights/tags/${tag}`}>
                  {tag}
                </Tag>
              ))}
            </div>
          )}
        </div>
      </div>
    </div>
    {
      coverImageUrl && (
        <a href={coverImageLinkUrl || sourceUrl}>
          <img
            src={coverImageUrl}
            alt={coverImageAlt}
            class="hidden md:block"
          />
        </a>
      )
    }
  </div>
</blockquote>
