---
import "../styles/global.css";
import AnimatedHeader from "../components/AnimatedHeader.astro";
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <title>YouTube Graphic</title>
  <style>
    body { margin: 0; padding: 1rem; }
    form { margin-bottom: 1rem; }
    select, textarea, button { padding: 0.5rem; margin: 0.5rem; font-size: 1rem; font-family: inherit; }
    textarea { width: 400px; height: 100px; resize: vertical; display: block; }
    button { background: var(--bg); border: 1px solid var(--border); cursor: pointer; }
    button:hover { background: var(--text); color: var(--bg); }
    #graphic-container { max-width: 1920px; margin-top: 1rem; }
    #graphic-container .animated-header { border: 2px solid black; }
  </style>
</head>
<body>
  <form method="get">
    <select name="pattern" id="pattern">
      <option value="animated-pattern.svg">Semicircles</option>
      <option value="animated-pattern-2.svg">Squares & Hexagons</option>
      <option value="animated-pattern-3.svg">Circles & Triangles</option>
    </select>
    <br>
    <textarea name="text" id="input" placeholder="Text">Your Text Here</textarea>
    <br>
    <button type="submit">Update Graphic</button>
  </form>

  <div id="graphic-container">
    <AnimatedHeader
      title="Your Text Here"
      pattern="animated-pattern.svg"
      height="auto"
      border={true}
      marginBottom="0"
    />
  </div>

  <script>
    // Read URL params and update the graphic
    const urlParams = new URLSearchParams(window.location.search);
    const text = urlParams.get('text') || 'Your Text Here';
    const pattern = urlParams.get('pattern') || 'animated-pattern.svg';

    // Update form inputs
    const patternSelect = document.getElementById('pattern');
    const textInput = document.getElementById('input');

    if (patternSelect) patternSelect.value = pattern;
    if (textInput) textInput.value = text;

    // Update the graphic
    const header = document.querySelector('.animated-header');
    if (header) {
      const objectEl = header.querySelector('object');
      if (objectEl) {
        objectEl.data = `/${pattern}`;
      }

      const textEl = header.querySelector('.header-title');
      if (textEl) {
        textEl.textContent = text;
        // Trigger resize event to recalculate text size
        window.dispatchEvent(new Event('resize'));
      }
    }
  </script>
</body>
</html>
