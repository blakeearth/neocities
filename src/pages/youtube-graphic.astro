---
import "../styles/global.css";
import AnimatedHeader from "../components/AnimatedHeader.astro";
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <title>YouTube Graphic</title>
  <style>
    body { margin: 0; padding: 1rem; }
    select, textarea { padding: 0.5rem; margin: 0.5rem; font-size: 1rem; font-family: inherit; }
    textarea { width: 400px; height: 100px; resize: vertical; display: block; }
    #graphic-container { max-width: 1920px; margin-top: 1rem; }
    #graphic-container .animated-header { border: 2px solid black; }
  </style>
</head>
<body>
  <div>
    <select id="pattern">
      <option value="animated-pattern.svg">Semicircles</option>
      <option value="animated-pattern-2.svg">Squares & Hexagons</option>
      <option value="animated-pattern-3.svg">Circles & Triangles</option>
    </select>
    <br>
    <textarea id="input" placeholder="Text">Your Text Here</textarea>
  </div>

  <div id="graphic-container">
    <AnimatedHeader
      title="Your Text Here"
      pattern="animated-pattern.svg"
      height="auto"
      border={true}
      marginBottom="0"
    />
  </div>

  <script>
    const patternSelect = document.getElementById('pattern');
    const inputTextarea = document.getElementById('input');
    const container = document.getElementById('graphic-container');

    const updateGraphic = () => {
      const selectedPattern = patternSelect.value;
      const text = inputTextarea.value;

      // Find the animated header in the container
      const header = container.querySelector('.animated-header');
      if (!header) return;

      // Update the pattern
      const objectEl = header.querySelector('object');
      if (objectEl) {
        objectEl.data = `/${selectedPattern}`;
      }

      // Update the text
      const textEl = header.querySelector('.header-title');
      if (textEl) {
        textEl.textContent = text;

        // Trigger resize event to recalculate text size
        window.dispatchEvent(new Event('resize'));
      }
    };

    patternSelect.addEventListener('change', updateGraphic);
    inputTextarea.addEventListener('input', updateGraphic);
  </script>
</body>
</html>
